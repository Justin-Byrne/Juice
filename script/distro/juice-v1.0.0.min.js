/**
 * Juice - JavaScript Unified Interactive Creation Engine
 * Copyright (C) 2025  Justin D. Byrne
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Library General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Library General Public License for more details.
 *
 * You should have received a copy of the GNU Library General Public
 * License along with this library; if not, write to the
 * Free Software Foundation, Inc., 51 Franklin St, Fifth Floor,
 * Boston, MA  02110-1301, USA.
 *
 * Byrne-Systems, hereby disclaims all copyright interest in
 * the library 'Juice' (JavaScript Unified Interactive Creation Engine) written
 * by Justin D. Byrne. (justin@byrne-systems.com)
 */

"use strict";const PI2=2*Math.PI,DEG_TO_RAD=Math.PI/180,RAD_TO_DEG=180/Math.PI,CSS_COLORS=(String.prototype.toCamelCase=function(){return this.charAt(0).toLowerCase()+this.substring(1)},new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","navyblue","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"])),KEYCODE=Object.freeze({BACKSPACE:8,TAB:9,ENTER:13,COMMAND:15,SHIFT:16,CONTROL:17,ALTERNATE:18,PAUSE:19,CAPS_LOCK:20,NUMPAD:21,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,NUMBER_0:48,NUMBER_1:49,NUMBER_2:50,NUMBER_3:51,NUMBER_4:52,NUMBER_5:53,NUMBER_6:54,NUMBER_7:55,NUMBER_8:56,NUMBER_9:57,N0:48,N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_WINDOW_KEY:91,RIGHT_WINDOW_KEY:92,SELECT_KEY:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUAL:187,COMMA:188,MINUS:189,PERIOD:190,SLASH:191,BACKQUOTE:192,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221,QUOTE:222}),PROPERTY_BLOCKS={individual:{alpha:{set(t){this._alpha=t<=1&&0<=t?t:this._alpha},get(){return this._alpha}},angle:{get(){return this._angle}},area:{get(){return Math.PI*Math.pow(this.radius,2)}},aspect:{set(t){this._aspect=VERIFY.isAspect(t)?t:this._aspect},get(){return this._aspect}},blur:{set(t){this._blur=VERIFY.isBlur(t)?t:this._blur},get(){return this._blur}},canvas:{set(t){this._canvas=(VERIFY.isInDom(t)?document.getElementById(t):document.getElementById("canvas")).getContext("2d")},get(){return this._canvas}},center:{get(){var t=this.x-(this.x-this.anchor.x)+this.width/2,e=this.y-(this.y-this.anchor.y)+this.height/2;return new Point(t,e)}},color:{set(t){this._color=VERIFY.isColorModel(t)?t:this._color},get(){return this._color}},end:{set(t){this._end=VERIFY.isPoint(t)?t:this._end},get(){return this._end}},fill:{set(t){this._fill=VERIFY.isFill(t)?t:this._fill},get(){return this._fill}},height:{set(t){this._aspect.height=VERIFY.isNumber(t)?t:this._aspect._height},get(){return this._aspect.height}},lineCap:{set(t){this._lineCap=VERIFY.isLineCap(t)?t:this._lineCap},get(){return this._lineCap}},master:{set(t){this._master=VERIFY.isBasicObject(t)?t:this._master},get(){return this._master}},offset:{set(t){this._offset=VERIFY.isPoint(t)?t:this._offset},get(){return this._offset}},offsetX:{set(t){this._offset.x=t},get(){return this._offset.x}},offsetY:{set(t){this._offset.y=t},get(){return this._offset.y}},point:{set(t){this._point=VERIFY.isPoint(t)?new Point(t.x,t.y):this._point},get(){return this._point}},pointX:{set(t){this._point.x=t},get(){return this._point.x}},pointY:{set(t){this._point.y=t},get(){return this._point.y}},perimeter:{get(){return 2*this.area}},radius:{set(t){t&&(this._radius=VERIFY.isNumber(t)||VERIFY.isPoint(t)?t:this._radius)},get(){return this._radius}},round:{set(t){this._round=Array.isArray(t)?t:this._round},get(){return this._round}},shadow:{get(){return this._shadow}},source:{set(t){var e;VERIFY.isString(t)&&((e=new Image).src=t,this._source=e,this.type="source")},get(){return this._source}},start:{set(t){this._start=VERIFY.isPoint(t)?t:this._start},get(){return this._start}},stroke:{set(t){this._stroke=VERIFY.isStroke(t)?t:this._stroke},get(){return this._stroke}},template:{set(t){this._template=VERIFY.isTemplate(t)?t:this._template},get(){return this._template}},width:{set(t){this._aspect.width=VERIFY.isNumber(t)?t:this._aspect._width},get(){return this._aspect.width}}},collection:{anchor:{set(t){this._anchor.type=VERIFY.isAnchor(t)?t:this._anchor.type,this._setAnchorPoint()},get(){return this._anchor}},area:{get(){return this.width*this.height}},aspect:{get(){return this._setAspect(),this._aspect}},aspectWidth:{get(){return this._aspect.width}},aspectHeight:{get(){return this._aspect.height}},canvas:{set(t){if(this._canvas=t?VERIFY.isInDom(t)?document.getElementById(t).getContext("2d"):VERIFY.isBasicObject(t)?null:console.warn(`"${t}" is not a valid DOM element !`):document.getElementById("canvas").getContext("2d"),0<this.length&&this._canvas instanceof CanvasRenderingContext2D)for(var e of this)e&&(e.canvas=this.canvas)},get(){return null!=this._canvas?this._canvas.canvas.id:void 0}},center:{get(){return new Point(this.width/2,this.height/2)}},endPoint:{get(){return this[this.length-1].point}},perimeter:{get(){return 2*this.area}},storageType:{get(){return this._storage.type}},template:{set(t){VERIFY.isTemplate(t)&&([this._template,this._template._master]=[t,this],this._template.init(),this._setAllCanvases())},get(){return this._template}}}},SYMBOLS={glyphs:{egyptian:["ð“†—","ð“³","ð“…“","ð“ƒ ","ð“ƒ¶","ð“†£","ð“ˆ","ð“†ƒ","ð“‚€","ð“‹¹"]},emojis:{clocks:{one:["ðŸ•›","ðŸ•","ðŸ•‘","ðŸ•’","ðŸ•“","ðŸ•”","ðŸ••","ðŸ•–","ðŸ•—","ðŸ•˜","ðŸ•™","ðŸ•š"],two:["ðŸ•§","ðŸ•œ","ðŸ•","ðŸ•ž","ðŸ•Ÿ","ðŸ• ","ðŸ•¡","ðŸ•¢","ðŸ•£","ðŸ•¤","ðŸ•¥","ðŸ•¦"]}}},UTILITIES={collection:{draw(t){if(void 0!==t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D)if(0<this.length)for(var e of this)e.draw();else console.warn(`No ${this.constructor.name} exist to draw !`);else console.warn(`'canvas' property is not set for ${this.constructor.name} !`)},getPoints(t,e=!0){var i=new Array;if(Array.isArray(t))for(var s of t)i.push(this[s].point);else for(var r of this)i.push(r.point);if(e){var n,o,a=new Aspect(999999,999999);for(n of i)a.width=n.x<a.width?n.x:a.width,a.height=n.y<a.height?n.y:a.height;for(o of i)o.x-=a.width,o.y-=a.height}return i},push(){for(let t=0;t<arguments.length;t++)arguments[t]instanceof this.storageType?Array.prototype.push.apply(this,[arguments[t]]):VERIFY.isPoint(arguments[t])||console.error(`[ERROR] Argument ${t+1}, of type "${arguments[t].constructor.name}", is not a valid type !`)}},individual:{color:{cycle:{stroke(t,e,i,s=1){this._stroke._color._cycle(t,e,i,s)},fill(t,e,i,s=1){this._fill.color._cycle(t,e,i,s)},gradient(t,e,i,s,r=1){this._fill.gradient.stopColorCycle(t,e,i,s,r)},stop(t,e,i,s,r){this.stops[s].color._cycle(t,e,i,r)}}},misc:{move(t,e){var t=t%360*DEG_TO_RAD,i=Math.cos(t),t=Math.sin(t);this.x-=i*e,this.y-=t*e}},set:{all(t,e){var i=this.constructor.name.replace("Collection","").toLowerCase();if(this["_"+t]=e,0<this._master.length)for(const s of this._master)s[i][t]=e},shadow(){this._canvas.shadowBlur=this._shadow.blur,this._canvas.shadowOffsetX=this._shadow.x,this._canvas.shadowOffsetY=this._shadow.y,this._canvas.shadowColor=this._shadow.color.toCss()},fillType(){var t=(t,e)=>{for(const i of e)t.addColorStop(i.offset,i.color.toCss());return t};switch(this.fill.type){case"solid":this._canvas.fillStyle=this.fill.color.toCss();break;case"linear":var e=this._canvas.createLinearGradient(this.fill.gradient.start.x,this.fill.gradient.start.y,this.fill.gradient.end.x,this.fill.gradient.end.y);this._canvas.fillStyle=t(e,this.fill.gradient.stops);break;case"radial":e=this._canvas.createRadialGradient(this.fill.gradient.start.x,this.fill.gradient.start.y,this.fill.gradient.startRadius,this.fill.gradient.end.x,this.fill.gradient.end.y,this.fill.gradient.endRadius);this._canvas.fillStyle=t(e,this.fill.gradient.stops);break;case"conic":e=this._canvas.createConicGradient(this.fill.gradient.angle,this.fill.gradient.point.y,this.fill.gradient.point.x);this._canvas.fillStyle=t(e,this.fill.gradient.stops);break;case"pattern":this.fill._pattern.onload=()=>{this._canvas.fillStyle=this._canvas.createPattern(this.fill.pattern,this.fill.repetition),this._canvas.fill()}}}}}},VERIFY={is256:t=>"number"==typeof t&&0<=t&&t<=255,isAngle:t=>t instanceof Angle||"number"==typeof t&&t<=360,isAlpha:t=>"number"==typeof t&&0<=t&&t<=1,isAspect(t){return t instanceof Aspect||2===Object.keys(t).length&&"number"==typeof t.width&&"number"==typeof t.height},isBoolean:t=>"boolean"==typeof t,isBlur:t=>"number"==typeof t&&0<=t,isBasicObject(e){return[Group,Line,Lines,Circle,Circles,Ellipse,Ellipses,Rectangle,Rectangles,RoundedRectangle,Text,Texts,cImage].some(t=>e instanceof t)},isColorName:t=>CSS_COLORS.has(t.toLowerCase()),isColorModel:t=>t instanceof Rgb,isControlPoint:t=>Array.isArray(t)&&4===t.length&&t.every(t=>"number"==typeof t),isDecimal:t=>"number"==typeof t&&0<=t&&t<=1,isDegree:t=>"number"==typeof t&&t<=360,isFill(t){var e;return t instanceof Fill||1<(e=Object.keys(t)).length&&e.length<6&&t.color instanceof Rgb&&"string"==typeof t.type},isFillType:t=>["solid","linear","radial","conic","pattern"].includes(t),isGradient:t=>t instanceof Linear||t instanceof Radial||t instanceof Conic,isInDom:t=>null!==document.getElementById(t),isLineCap:t=>["butt","round","square"].includes(t),isNumber:t=>"number"==typeof t&&!isNaN(t),isPoint(t){return t instanceof Point||2===Object.keys(t).length&&"number"==typeof t.x&&"number"==typeof t.y},isPointNAspect(t){return"object"==typeof t&&2===Object.keys(t).length&&this.isPoint(t.point)&&this.isAspect(t.aspect)},isRadian:t=>"number"==typeof t&&0<=t&&t<=PI2,isRadius:t=>"number"==typeof t&&0<t,isRepetition:t=>["repeat","repeat-x","repeat-y","no-repeat"].includes(t),isSegments:t=>Array.isArray(t)&&t.every(t=>"number"==typeof t),isStop(t){return t instanceof Stop||"object"==typeof t&&!Array.isArray(t)&&VERIFY.isNumber(t.offset)&&VERIFY.isColorModel(t.color)},isString:t=>"string"==typeof t,isStroke(t){var e;return t instanceof Stroke||1<(e=Object.keys(t)).length&&e.length<5&&t.color instanceof Rgb&&"string"==typeof t.type&&"number"==typeof t.width},isStrokeType:t=>["solid","dashed"].includes(t),isTemplate(value){if(!value)return!1;try{const _instance=eval(`new ${value.constructor.name} ();`),_functions=Object.getOwnPropertyNames(Object.getPrototypeOf(value));return Object.hasOwn(_instance,"_point")&&Object.hasOwn(_instance,"_master")&&_functions.includes("init")}catch{return!1}},isTransition(value){if(!value)return!1;try{const _instance=eval(`new ${value.constructor.name} ();`);return Object.hasOwn(_instance,"_transitions")&&Object.hasOwn(_instance,"_template")}catch{return!1}},isWidth:t=>"number"==typeof t&&0<=t};class Rgb{_red=0;_green=0;_blue=0;_alpha=1;constructor(t,e,i,s){this.red=t,this.green=e,this.blue=i,this.alpha=s}set red(t){this._red=VERIFY.is256(t)?Math.round(t):this._red}get red(){return this._red}set green(t){this._green=VERIFY.is256(t)?Math.round(t):this._green}get green(){return this._green}set blue(t){this._blue=VERIFY.is256(t)?Math.round(t):this._blue}get blue(){return this._blue}set alpha(t){this._alpha=VERIFY.isAlpha(t)?t:this._alpha}get alpha(){return this._alpha}_lerp(t,e,i,s){return Math.round(t+(e-t)*i/s)}_lerpRgb(t,e,i,s){this._red=this._lerp(t.red,e.red,i,s),this._green=this._lerp(t.green,e.green,i,s),this._blue=this._lerp(t.blue,e.blue,i,s)}cycle(t,e,i,s){this._lerpRgb(t,e,i,s)}toCss(){return`rgb(${this.red} ${this.green} ${this.blue} / ${100*this.alpha}%)`}}class Options{_shadow=!1;set shadow(t){this._shadow=VERIFY.isBoolean(t)?t:this._shadow}get shadow(){return this._shadow}}class Range{_min=0;_max=100;_value=0;constructor(t,e,i){this.min=t,this.max=e,this.value=i}set min(t){this._min=VERIFY.isNumber(t)?t:this._min}get min(){return this._min}set max(t){this._max=VERIFY.isNumber(t)?t:this._max}get max(){return this._max}set value(t){this._value=VERIFY.isNumber(t)?t:this._value}get value(){return this._value}}class Angle{_start=0;_end=360;_clockwise=!0;constructor(t,e,i){this.start=t,this.end=e,this.clockwise=i}set start(t){this._start=VERIFY.isDegree(t)?t:this._start}get start(){return this._start}set end(t){this._end=VERIFY.isDegree(t)?t:this._end}get end(){return this._end}set clockwise(t){this._clockwise=VERIFY.isBoolean(t)?t:this._clockwise}get clockwise(){return this._clockwise}_convert2Radian(t){return VERIFY.isDegree(t)?t*DEG_TO_RAD:console.warn(t+" is not a degree value !")}get startInRadians(){return this._convert2Radian(this.start)}get endInRadians(){return this._convert2Radian(this.end)}}class Aspect{_width=0;_height=0;#offset=new Point;constructor(t,e){this.width=t,this.height=e}set width(t){this._width=VERIFY.isNumber(t)?t:this._width}get width(){return this._width}set height(t){this._height=VERIFY.isNumber(t)?t:this._height}get height(){return this._height}get offset(){return this.#offset}get center(){return new Point(this.width/2,this.height/2)}get heightCenter(){return this.height/2}get widthCenter(){return this.width/2}}class ControlPoints{_p0=0;_p1=0;_p2=0;_p3=0;constructor(t,e,i,s){this.p0=t,this.p1=e,this.p2=i,this.p3=s}set p0(t){this._p0=VERIFY.isNumber(t)?t:this._p0}get p0(){return this._p0}set p1(t){this._p1=VERIFY.isNumber(t)?t:this._p1}get p1(){return this._p1}set p2(t){this._p2=VERIFY.isNumber(t)?t:this._p2}get p2(){return this._p2}set p3(t){this._p3=VERIFY.isNumber(t)?t:this._p3}get p3(){return this._p3}set points(t){VERIFY.isControlPoint(t)&&([this.p0,this.p1,this.p2,this.p3]=[t[0],t[1],t[2],t[3]])}get points(){return[this.p0,this.p1,this.p2,this.p3]}}class Font{_type=void 0;_size=24;_weight="normal";_maxWidth=void 0;_offset=new Point;#weight={type:["normal","bold","italic"]};set type(t){var e;this._type=VERIFY.isString(t)?t:this._type,t||(t=/(\w+(\s))?(?<size>\d+)px\s(?<type>\w.+)/,(e=document.getElementById("canvas")?.getContext("2d"))&&t.test(e.font)&&(this._type=t.exec(e.font).groups.type))}get type(){return this._type}set size(t){this._size=VERIFY.isNumber(t)?t:this._size}get size(){return this._size}set weight(t){this._weight=this.#weight.type.includes(t)?t:this._weight}get weight(){return this._weight}set maxWidth(t){this._maxWidth=VERIFY.isNumber(t)?t:this._maxWidth}get maxWidth(){return this._maxWidth}set offset(t){this._offset=VERIFY.isPoint(t)?t:this._offset}get offset(){return this._offset}set font(t){/(\w+(-\w+?)?|[1-9][0][0]?)(\s?)\d{1,3}px\s\w.+/.test(t)&&(this.font=t)}get font(){return`${this._weight} ${this._size}px `+this._type}}class Point{_x=0;_y=0;_z=0;constructor(t,e,i){this.x=t,this.y=e,this.y=e}set x(t){this._x=VERIFY.isNumber(t)?t:this._x}get x(){return this._x}set y(t){this._y=VERIFY.isNumber(t)?t:this._y}get y(){return this._y}set z(t){this._z=VERIFY.isNumber(t)?t:this._z}get z(){return this._z}}class Gradient{_stops=new Array;set stops(t){if(Array.isArray(t))for(const e of t)VERIFY.isStop(e)?this._stops.push(e):console.warn("[ ERROR ]: value is not of type Array !")}get stops(){return this._stops}_stopColorCycle(t,e,i,s,r){this.stops[s].color._cycle(t,e,i,r)}}class Stop{_color=new Rgb;_offset=void 0;constructor(t,e){this._defineProperties(),this.color=t,this.offset=e}_defineProperties(){Object.defineProperty(this,"color",PROPERTY_BLOCKS.individual.color)}set offset(t){this._offset=VERIFY.isDecimal(t)?t:this._offset}get offset(){return this._offset}}class Conic extends Gradient{_point=new Point;_angle=0;constructor(t,e,i){super(),this._defineProperties(),this.point=e,this.angle=t,this.stops=i}_defineProperties(){Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point)}set angle(t){this._angle=VERIFY.isRadian(t)?t:this._angle}get angle(){return this._angle}}class Linear extends Gradient{_start=new Point;_end=new Point;constructor(t,e,i){super(),this._defineProperties(),this.start=t,this.end=e,this.stops=i}_defineProperties(){Object.defineProperty(this,"start",PROPERTY_BLOCKS.individual.start),Object.defineProperty(this,"end",PROPERTY_BLOCKS.individual.end)}}class Radial extends Gradient{_start=new Point;_startRadius=0;_end=new Point;_endRadius=0;constructor(t,e,i,s,r){super(),this._defineProperties(),this.start=t,this.startRadius=e,this.end=i,this.endRadius=s,this.stops=r}_defineProperties(){Object.defineProperty(this,"start",PROPERTY_BLOCKS.individual.start),Object.defineProperty(this,"end",PROPERTY_BLOCKS.individual.end)}set startRadius(t){this._startRadius=VERIFY.isRadius(t)?t:this._startRadius}get startRadius(){return this._startRadius}set endRadius(t){this._endRadius=VERIFY.isRadius(t)?t:this._endRadius}get endRadius(){return this._endRadius}}class Fill{_color=new Rgb(0,0,0,0);_type="solid";_gradient=void 0;_pattern=void 0;_repetition="repeat";constructor(t,e,i,s,r){this._defineProperties(),this.color=t,this.type=e,this.gradient=i,this.pattern=s,this.repetition=r}_defineProperties(){Object.defineProperty(this,"color",PROPERTY_BLOCKS.individual.color)}set type(t){this._type=VERIFY.isFillType(t)?t:this._type}get type(){return this._type}set gradient(t){VERIFY.isGradient(t)&&([this._gradient,this._type]=[t,t.constructor.name.toLowerCase()])}get gradient(){return this._gradient}set pattern(t){var e;VERIFY.isString(t)&&((e=new Image).src=t,this._pattern=e,this.type="pattern")}get pattern(){return this._pattern}set repetition(t){this._repetition=VERIFY.isRepetition(t)?t:this._repetition}get repetition(){return this._repetition}}class Shadow{_color=new Rgb;_blur=3;_offset=new Point;constructor(t,e,i={x:void 0,y:void 0}){this._defineProperties(),this.color=t,this.blur=e,this.offset=i}_defineProperties(){Object.defineProperty(this,"color",PROPERTY_BLOCKS.individual.color),Object.defineProperty(this,"blur",PROPERTY_BLOCKS.individual.blur),Object.defineProperty(this,"offset",PROPERTY_BLOCKS.individual.offset),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.offsetX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.offsetY)}}class Stroke{_color=new Rgb(255,255,255);_type="solid";_segments=[5,5];_width=1;constructor(t,e,i,s){this._defineProperties(),this.color=t,this.type=e,this.segments=i,this.width=s}_defineProperties(){Object.defineProperty(this,"color",PROPERTY_BLOCKS.individual.color)}set type(t){this._type=VERIFY.isStrokeType(t)?t:this._type}get type(){return this._type}set segments(t){this._segments=VERIFY.isSegments(t)?t:this._segments}get segments(){return this._segments}set width(t){this._width=VERIFY.isWidth(t)?t:this._width}get width(){return this._width}}class Shape{_point=new Point;_stroke=new Stroke;_shadow=new Shadow;_canvas=void 0;#scale=new Point(1,1);#options=new Options;#mass=0;#velocity=new Point;#active=!1;#id=null;constructor(t={}){var{point:t={x:void 0,y:void 0},stroke:e={color:void 0,type:void 0,segments:void 0,width:void 0},shadow:i={color:void 0,blur:void 0,offset:{x:void 0,y:void 0}},canvas:s=void 0}=t;this.point=t,this._stroke=new Stroke(e.color,e.type,e.segments,e.width),this._shadow=new Shadow(i.color,i.blur,{x:i.offset.x,y:i.offset.y}),this.canvas=s}set point(t){this._point=VERIFY.isPoint(t)?new Point(t.x,t.y):this._point}get point(){return this._point}set x(t){this._point.x=t}get x(){return this._point.x}set y(t){this._point.y=t}get y(){return this._point.y}set stroke(t){this._stroke=VERIFY.isStroke(t)?t:this._stroke}get stroke(){return this._stroke}get shadow(){return this._shadow}set canvas(t){this._canvas=(VERIFY.isInDom(t)?document.getElementById(t):document.getElementById("canvas")).getContext("2d")}get canvas(){return this._canvas}set scale(t){this.#scale=t}get scale(){return this.#scale}get options(){return this.#options}set id(t){this.#id=t}get id(){return this.#id}_setShadow(){this._canvas.shadowBlur=this._shadow.blur,this._canvas.shadowOffsetX=this._shadow.x,this._canvas.shadowOffsetY=this._shadow.y,this._canvas.shadowColor=this._shadow.color.toCss()}move(t,e){var t=t%360*DEG_TO_RAD,i=Math.cos(t),t=Math.sin(t);this.x-=i*e,this.y-=t*e}_beginDraw(t){return void 0!==t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D?((t=this._canvas).save(),t):(console.warn(`'canvas' property is not set for ${this.constructor.name}!`),null)}_endDraw(t){this.options.shadow&&(t.shadowColor=new Rgb(0,0,0,0).toCss()),t.restore()}_applyStroke(t){t.strokeStyle=this.stroke.color.toCss(),t.lineWidth=this.stroke.width,t.setLineDash("solid"===this.stroke.type?[]:this.stroke.segments)}draw(t){throw new Error("Draw method must be implemented by subclass")}}class ShapeFillable extends Shape{_fill=new Fill;constructor(t={}){super(t);var{fill:t={color:void 0,type:void 0}}=t;Object.defineProperty(this,"fill",PROPERTY_BLOCKS.individual.fill),this._fill=new Fill(t.color,t.type)}_setFillType(){var t=(t,e)=>{for(const i of e)t.addColorStop(i.offset,i.color.toCss());return t};switch(this.fill.type){case"solid":this._canvas.fillStyle=this.fill.color.toCss();break;case"linear":var e=this._canvas.createLinearGradient(this.fill.gradient.start.x,this.fill.gradient.start.y,this.fill.gradient.end.x,this.fill.gradient.end.y);this._canvas.fillStyle=t(e,this.fill.gradient.stops);break;case"radial":e=this._canvas.createRadialGradient(this.fill.gradient.start.x,this.fill.gradient.start.y,this.fill.gradient.startRadius,this.fill.gradient.end.x,this.fill.gradient.end.y,this.fill.gradient.endRadius);this._canvas.fillStyle=t(e,this.fill.gradient.stops);break;case"conic":e=this._canvas.createConicGradient(this.fill.gradient.angle,this.fill.gradient.point.y,this.fill.gradient.point.x);this._canvas.fillStyle=t(e,this.fill.gradient.stops);break;case"pattern":this.fill._pattern.onload=()=>{this._canvas.fillStyle=this._canvas.createPattern(this.fill.pattern,this.fill.repetition),this._canvas.fill()}}}_drawFillAndStroke(t){t.stroke(),"pattern"!==this.fill.type&&t.fill()}}class Circle extends ShapeFillable{_radius=25;_angle=new Angle;constructor(t={x:void 0,y:void 0},e,i={start:void 0,end:void 0,clockwise:void 0},s={color:void 0,type:void 0,segments:void 0,width:void 0},r={color:void 0,type:void 0},n={color:void 0,blur:void 0,offset:{x:void 0,y:void 0}},o=void 0){super({point:t,stroke:s,fill:r,shadow:n,canvas:o}),this._defineProperties(),this.radius=e,this._angle=new Angle(i.start,i.end,i.clockwise)}_defineProperties(){Object.defineProperty(this,"radius",PROPERTY_BLOCKS.individual.radius),Object.defineProperty(this,"angle",PROPERTY_BLOCKS.individual.angle)}draw(t){t=this._beginDraw(t);t&&(this.options.shadow&&this._setShadow(),this._applyStroke(t),this._setFillType(),t.beginPath(),VERIFY.isPoint(this.radius)?t.ellipse(this.x,this.y,this.radius.x,this.radius.y,0,this.angle.startInRadians,this.angle.endInRadians,!this.angle.clockwise):t.arc(this.x,this.y,this.radius,this.angle.startInRadians,this.angle.endInRadians,!this.angle.clockwise),this._drawFillAndStroke(t),this._endDraw(t))}}class Ellipse extends Circle{_radius=new Point(20,30)}class Line extends Shape{_start=new Point;_end=new Point;_lineCap="round";#offset=new Point(0,0);#controlPoints=new ControlPoints;constructor(t={x:void 0,y:void 0},e={x:void 0,y:void 0},i={color:void 0,type:void 0,segments:void 0,width:void 0},s={color:void 0,blur:void 0,offset:{x:void 0,y:void 0}},r=void 0,n){super({point:{x:void 0,y:void 0},stroke:i,shadow:s,canvas:n}),this._defineProperties(),this.start=t,this.end=e,this.lineCap=r}_defineProperties(){Object.defineProperty(this,"start",PROPERTY_BLOCKS.individual.start),Object.defineProperty(this,"end",PROPERTY_BLOCKS.individual.end),Object.defineProperty(this,"lineCap",PROPERTY_BLOCKS.individual.lineCap)}set offset(t){this.#offset=t}get offset(){return this.#offset}get controlPoints(){return this.#controlPoints}_setPath(t){var e=this.controlPoints;0!==e.p0||0!==e.p1||0!==e.p2||0!==e.p3?t.bezierCurveTo(e.p0+this.start.x,e.p1+this.start.y,e.p2+this.end.x,e.p3+this.end.y,this.end.x,this.end.y):t.lineTo(this.end.x,this.end.y)}get center(){var t=this.start.x>this.end.x?this.end.x+(this.start.x-this.end.x)/2:this.start.x+(this.end.x-this.start.x)/2,e=this.start.y>this.end.y?this.end.y+(this.start.y-this.end.y)/2:this.start.y+(this.end.y-this.start.y)/2;return new Point(t,e)}curve(t,e,i,s){this.controlPoints.p0=t,this.controlPoints.p1=e,this.controlPoints.p2=i,this.controlPoints.p3=s}draw(t){t=this._beginDraw(t);t&&(t.translate(this.x,this.y),this._applyStroke(t),t.lineCap=this.lineCap,t.beginPath(),t.moveTo(this.start.x,this.start.y),this._setPath(t),t.closePath(),t.stroke(),this._endDraw(t))}}class Rectangle extends ShapeFillable{_aspect=new Aspect;_round=new Array;constructor(t={x:void 0,y:void 0},e={width:void 0,height:void 0},i=[0,0,0,0],s={color:void 0,type:void 0,segments:void 0,width:void 0},r={color:void 0,type:void 0},n={color:void 0,blur:void 0,offset:{x:void 0,y:void 0}},o){super({point:t,stroke:s,fill:r,shadow:n,canvas:o}),this._defineProperties(),this.width=void 0!==e.width?e.width:50,this.height=void 0!==e.height?e.height:50,this.round=i}_defineProperties(){Object.defineProperty(this,"aspect",PROPERTY_BLOCKS.individual.aspect),Object.defineProperty(this,"width",PROPERTY_BLOCKS.individual.width),Object.defineProperty(this,"height",PROPERTY_BLOCKS.individual.height),Object.defineProperty(this,"round",PROPERTY_BLOCKS.individual.round)}draw(t){t=this._beginDraw(t);t&&(this.options.shadow&&this._setShadow(),this._applyStroke(t),this._setFillType(),t.beginPath(),t.roundRect(this.x,this.y,this.width,this.height,this.round),this._drawFillAndStroke(t),this._endDraw(t))}}class RoundedRectangle extends Rectangle{_round=[5,5,5,5]}class Text extends Font{_point=new Point;_text=void 0;_stroke=new Stroke;_fill=new Fill;_shadow=new Shadow;_canvas=void 0;#scale=new Point(1,1);#options=new Options;#mass=0;#velocity=new Point;#id=null;constructor(t={x:void 0,y:void 0},e,i,s,r,n,o={x:void 0,y:void 0},a={color:void 0,type:void 0,segments:void 0,width:void 0},h={color:void 0,type:void 0},l={color:void 0,blur:void 0,offset:{x:void 0,y:void 0}},d){super(),this._defineProperties(),this._defineUtilities(),a.width=void 0===a.width?0:a.width,h.color=void 0===h.color?new Rgb(0,0,0):h.color,this.point=t,this.text=e,super.type=i,super.size=s,super.weight=r,super.maxWidth=n,super.offset=o,this._stroke=new Stroke(a.color,a.type,a.segments,a.width),this._fill=new Fill(h.color,h.type),this._shadow=new Shadow(l.color,l.blur,{x:l.offset.x,y:l.offset.y}),this.canvas=d}_defineProperties(){Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.individual.canvas),Object.defineProperty(this,"offset",PROPERTY_BLOCKS.individual.offset),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.pointY),Object.defineProperty(this,"stroke",PROPERTY_BLOCKS.individual.stroke),Object.defineProperty(this,"fill",PROPERTY_BLOCKS.individual.fill),Object.defineProperty(this,"shadow",PROPERTY_BLOCKS.individual.shadow)}_defineUtilities(){this._setFillType=UTILITIES.individual.set.fillType,this._setShadow=UTILITIES.individual.set.shadow,this.move=UTILITIES.individual.misc.move}set text(t){this._text=VERIFY.isString(t)?t:void 0}get text(){return this._text}set scale(t){this.#scale=t}get scale(){return this.#scale}get options(){return this.#options}draw(t,e=0){var i,s,r;void 0!==t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D?(t=this._canvas,i=this.x+this.offset.x,s=this.y+this.offset.y,t.save(),t.scale(this.scale.x,this.scale.y),this.options.shadow&&this._setShadow(),t.font=this.font,t.textAlign="center",t.textBaseline="middle",this._setFillType(),t.fillText(this.text,i,s,this.maxWidth),0<this.stroke.width&&(r=t.lineWidth,t.lineWidth=this.stroke.width,t.strokeStyle=this.stroke.color.toCss(),t.strokeText(this.text,i,s,this.maxWidth),t.lineWidth=r),this.options.shadow&&(t.shadowColor=new Rgb(0,0,0,0).toCss()),t.restore()):console.warn(`'canvas' property is not set for ${this.constructor.name}!`)}}class aImage{_source=new Image;_primary={point:new Point,aspect:new Aspect};_secondary={point:void 0,aspect:void 0};_canvas=void 0;#id=null;constructor(t,e={point:{x:void 0,y:void 0},aspect:{width:void 0,height:void 0}},i={point:{x:void 0,y:void 0},aspect:{width:void 0,height:void 0}},s){this._defineProperties(),this._defineUtilities(),this.source=t,this.primary=e,this.secondary=i,this.canvas=s}_defineProperties(){Object.defineProperty(this,"source",PROPERTY_BLOCKS.individual.source),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.individual.canvas),Object.defineProperty(this,"center",PROPERTY_BLOCKS.individual.center)}_defineUtilities(){this.move=UTILITIES.individual.misc.move}set primary(t){VERIFY.isPointNAspect(t)&&([this._primary.point,this._primary.aspect]=[t.point,t.aspect])}get primary(){return this._primary}set secondary(t){VERIFY.isPointNAspect(t)&&([this._secondary.point,this._secondary.aspect]=[t.point,t.aspect])}get secondary(){return this._secondary}set point(t){this._primary.point=VERIFY.isPoint(t)?t:this._primary.point}get point(){return this._primary.point}set x(t){this._primary.point.x=VERIFY.isNumber(t)?t:this._primary.point.x}get x(){return this._primary.point.x}set y(t){this._primary.point.y=VERIFY.isNumber(t)?t:this._primary.point.y}get y(){return this._primary.point.y}set id(t){this.#id=t}get id(){return this.#id}get width(){return this.source.width}get height(){return this.source.height}_drawImage(){this.secondary.point?this._canvas.drawImage(this._source,this.secondary.point.x,this.secondary.point.y,this.secondary.aspect.width,this.secondary.aspect.height,this.anchor.x,this.anchor.y,this.primary.aspect.width,this.primary.aspect.height):this._canvas.drawImage(this._source,this.anchor.x,this.anchor.y,this._source.width,this._source.height)}draw(t){t&&(this.canvas=t),null===this.source.onload&&this._canvas instanceof CanvasRenderingContext2D?this.source.onload=()=>{this._drawImage()}:this._drawImage()}}class Collection extends Array{_template=void 0;_storage={type:null};constructor(){super(),this._defineProperties(),0<arguments.length&&this.push.apply(this,arguments)}_defineProperties(){Object.defineProperty(this,"template",PROPERTY_BLOCKS.collection.template),Object.defineProperty(this,"storageType",PROPERTY_BLOCKS.collection.storageType),Object.defineProperty(this,"endPoint",PROPERTY_BLOCKS.collection.endPoint)}push(){for(let t=0;t<arguments.length;t++)arguments[t]instanceof this.storageType?Array.prototype.push.apply(this,[arguments[t]]):VERIFY.isPoint(arguments[t])||console.error(`[ERROR] Argument ${t+1}, of type "${arguments[t].constructor.name}", is not a valid type !`)}draw(t){if(void 0!==t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D)if(0<this.length)for(var e of this)e.draw();else console.warn(`No ${this.constructor.name} exist to draw !`);else console.warn(`'canvas' property is not set for ${this.constructor.name} !`)}}class CollectionShape extends Collection{getPoints(t,e=!0){var i=new Array;if(Array.isArray(t))for(var s of t)i.push(this[s].point);else for(var r of this)i.push(r.point);if(e){var n,o,a=new Aspect(999999,999999);for(n of i)a.width=n.x<a.width?n.x:a.width,a.height=n.y<a.height?n.y:a.height;for(o of i)o.x-=a.width,o.y-=a.height}return i}}class Circles extends CollectionShape{_storage={type:Circle}}class Ellipses extends Circles{_storage={type:Ellipse}}class Group extends Array{_template=void 0;_lines=new Lines;_circles=new Circles;_ellipses=new Ellipses;_rectangles=new Rectangles;_roundedRectangles=new RoundedRectangles;_texts=new Texts;#storage={types:["lines","circles","ellipses","rectangles","roundedRectangles","texts"]};#collectionMap={Line:"_lines",Circle:"_circles",Ellipse:"_ellipses",Rectangle:"_rectangles",RoundedRectangle:"_roundedRectangles",Text:"_texts",Lines:"_lines",Circles:"_circles",Ellipses:"_ellipses",Rectangles:"_rectangles",RoundedRectangles:"_roundedRectangles",Texts:"_texts"};constructor(){super(),this._defineProperties()}_defineProperties(){Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.collection.canvas),Object.defineProperty(this,"template",PROPERTY_BLOCKS.collection.template)}get lines(){return this._lines}get circles(){return this._circles}get ellipses(){return this._ellipses}get rectangles(){return this._rectangles}get roundedRectangles(){return this._roundedRectangles}get texts(){return this._texts}_setAllCanvases(){if(this._canvas)for(var t of this.#storage.types)this["_"+t].length&&(this["_"+t].canvas=this.canvas)}_modifyCollection(t,e){for(var i of e){var s=i.constructor.name,r=this.#collectionMap[s];if(r){var n=this[r];if(s.endsWith("s"))for(var o of i)n[t](o);else n[t](i)}}}push(...t){this._modifyCollection("push",t)}pop(...t){this._modifyCollection("pop",t)}draw(t){void 0!==t&&(this.canvas=t);for(var e of this.#storage.types)0<this["_"+e].length?this["_"+e].draw():console.warn(`No ${e} exist to draw !`)}}class Lines extends Collection{_storage={type:Line}}class Rectangles extends CollectionShape{_storage={type:Rectangle}}class RoundedRectangles extends Rectangles{_storage={type:RoundedRectangle}}class Texts extends Collection{_storage={type:Text}}class Arrow extends ShapeFillable{#points=[new Point(39,0),new Point(4,-30),new Point(4,-8),new Point(-39,-13),new Point(-39,13),new Point(4,8),new Point(4,30),new Point(39,0)];constructor(t={}){super(t)}set points(t){this.#points=t}get points(){return this.#points}_drawShape(){for(let t=0;t<this.points.length;t++){var e=this._points[t],i=e.x+this.offset.x,e=e.y+this.offset.y;0===t?this._canvas.moveTo(i,e):this._canvas.lineTo(i,e)}}draw(t){t=this._beginDraw(t);t&&(t.translate(this.x,this.y),this.options.shadow&&this._setShadow(),this._applyStroke(t),this._setFillType(),t.beginPath(),t.roundRect(this.x,this.y,this.width,this.height,this.round),this._drawFillAndStroke(t),this._endDraw(t))}}class Polygon extends ShapeFillable{_vertices=new Array;constructor(t={}){super(t);var{_vertices:t=[]}=t;Array.isArray(t)&&0<t.length&&(this._vertices=t)}set vertices(t){this._vertices.push(t)}get vertices(){return this._vertices}isThere(t){return t instanceof Polygon?this.point.x==t.point.x&&this.point.y==t.point.y:(console.warn(`"${t.constructor.name}" is not of type `+this.constructor.name),!1)}addLines(i){if(Array.isArray(i)&&0!==i.length){this._vertices=[];for(let e=0;e<i.length;e++){let t;var s,r;t=0===e?new Point(i[0].start.x,i[0].start.y):([s,r]=[i[e-1],i[e]],Math.round(r.start.x)===Math.round(s.end.x)&&Math.round(r.start.y)===Math.round(s.end.y)?new Point(r.start.x,r.start.y):new Point(s.end.x,s.end.y)),this._vertices.push(t)}var t,e;0<i.length&&(t=i[i.length-1],e=this._vertices[this._vertices.length-1],Math.round(t.end.x)===Math.round(e.x)&&Math.round(t.end.y)===Math.round(e.y)||this._vertices.push(new Point(t.end.x,t.end.y)))}else console.warn("addLines requires a non-empty array of lines")}draw(t){const i=this._beginDraw(t);i&&(this._vertices.length<3?console.warn("Polygon requires at least 3 vertices to draw. Current count: "+this._vertices.length):(i.scale(this.scale.x,this.scale.y),this.options.shadow&&this._setShadow(),this._applyStroke(i),this._setFillType(),i.beginPath(),this._vertices.forEach((t,e)=>{0===e?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)}),i.closePath(),i.stroke(),"pattern"!==this.fill.type&&i.fill()),this._endDraw(i))}}class BoundedArray extends Array{#maxSize=void 0;constructor(t){super(),this.maxSize=t}set maxSize(t){this.#maxSize=VERIFY.isNumber(t)?t:this.#maxSize}get maxSize(){return this.#maxSize}get isAtCapacity(){return void 0!==this.#maxSize&&this.length>=this.#maxSize}get remainingCapacity(){return void 0===this.#maxSize?null:Math.max(0,this.#maxSize-this.length)}resizeCapacity(t){this.maxSize=t,void 0!==this.#maxSize&&this.length>this.#maxSize&&this.splice(0,this.length-this.#maxSize)}tryPush(t){return!this.isAtCapacity&&(super.push(t),!0)}push(){for(let t=0;t<arguments.length;t++)this.maximum&&this.maximum==this.length&&this.shift(),Array.prototype.push.apply(this,[arguments[t]])}}class Circlet{#entries=new Array;#index=0;#entry=void 0;#touched=!1;constructor(t){Array.isArray(t)?(this.entries=t,this.#entry=t[0]):this.#entries=Array.from(arguments).filter(t=>"object"==typeof t||"function"==typeof t)}set entries(t){this.#entries=Array.isArray(t)?t:this.#entries}get entries(){return this.#entries}get index(){return this.#index}set entry(t){"object"!=typeof t&&"function"!=typeof t||this.#entries.push(t)}get entry(){return this.#entry}isEnd(){return this.#touched&&0===this.#index}isLast(){return this.#index===this.#entries.length-1}isSet(){return 0<this.#entries.length}next(){return this.#touched=!0,this.#entry=this.#entries[this.#index],this.#index=(this.#index+1)%this.#entries.length,this.#entry}fore(){return this.#touched=!0,this.#entry=this.#entries[this.#index],this.#index=0===this.#index?this.#entries.length-1:this.#index-1,this.#entry}reset(){[this.#index,this.#touched]=[0,!1]}}class Queue{#entries=new Array;#index=0;#entry=void 0;#touched=!1;constructor(t){Array.isArray(t)?this.entries=t:this.#entries=Array.from(arguments).filter(t=>"object"==typeof t||"function"==typeof t)}set entries(t){this.#entries=Array.isArray(t)?t:this.#entries}get entries(){return this.#entries}get index(){return this.#index}set entry(t){"object"!=typeof t&&"function"!=typeof t||this.#entries.push(t)}get entry(){return this.#entry}get isEnd(){return this.#touched&&0===this.#index}get isLast(){return this.#index===this.#entries.length-1}get isSet(){return 0<this.#entries.length}get next(){this.#touched=!0;var t=this.#entries[this.#index];return this.#index=(this.#index+1)%this.#entries.length,t}get reset(){[this.#index,this.#touched]=[0,!1]}}class SacredCircles{_point=new Point;_radius=25;_iterations=void 0;_degrees=new Queue([90,330,270,210,150,90,30]);_strokes=new Rgb(0,0,0,1);_fills=new Rgb(255,255,255,0);_master=void 0;#numbers=void 0;#tangents=void 0;#counter=-1;#get={circle(t,e,i,s){return new Circle(t,e,void 0,new Stroke(i.color,i.type,i.segments,i.width),new Fill(s.color,s.type),void 0,void 0)},ellipse(t,e,i){return new Ellipse(t,new Point(this.radius,.5*this.radius),void 0,new Stroke(e.color,e.type,e.segments,e.width),new Fill(i.color,i.type),void 0,void 0)},rectangle(t,e,i){return new Rectangle(t,void 0,void 0,new Stroke(e.color,e.type,e.segments,e.width),new Fill(i.color,i.type),void 0,void 0)},roundedRectangle(t,e,i){return new RoundedRectangle(t,void 0,void 0,new Stroke(e.color,e.type,e.segments,e.width),new Fill(i.color,i.type),void 0,void 0)},text(t,e,i,s){return new Text(t,e,void 0,void 0,void 0,void 0,void 0,new Stroke(i.color,i.type,i.segments,i.width),new Fill(s.color,s.type),void 0)},line(t,e){return new Line(t,e,void 0,void 0,void 0,void 0)}};#config={reverse:!1};constructor(t={x:void 0,y:void 0},e,i,s,r,n,o){Object.defineProperty(this,"master",PROPERTY_BLOCKS.individual.master),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"radius",PROPERTY_BLOCKS.individual.radius),this.point=t,this.radius=e,this.iterations=i,this.strokes=s,this.fills=r,this.degrees=n,this.transitions=o,this._tangents=i}set point(t){}get point(){}set radius(t){}get radius(){}set iterations(t){this._iterations=VERIFY.isNumber(t)?t:this._iterations}get iterations(){return this._iterations}set degrees(t){this._degrees=Array.isArray(t)?new Queue(t):this._degrees}get degrees(){return this._degrees}set strokes(t){if(null!=t)switch(t.constructor.name){case"Rgb":this._strokes=new Queue(new Array(new Stroke(t)));break;case"Stroke":this._strokes=new Queue(new Array(t));break;case"Queue":this._strokes=t;break;default:Array.isArray(t);var e,i=new Array;for(e of t)switch(e.constructor.name){case"Rgb":i.push(new Stroke(e));break;case"Stroke":i.push(e)}this._strokes=new Queue(i)}else this._strokes=this._strokes}get strokes(){return this._strokes}set fills(t){if(null!=t)switch(t.constructor.name){case"Rgb":this._fills=new Queue(new Array(new Fill(t)));break;case"Fill":this._fills=new Queue(new Array(_array));break;case"Queue":this._fills=t;break;default:Array.isArray(t);var e,i=new Array;for(e of t)switch(e.constructor.name){case"Rgb":i.push(new Fill(e));break;case"Fill":i.push(e)}this._fills=new Queue(i),Array.isArray(t);var s,r=new Array;for(s of t)r.push(new Fill(s));this._fills=new Queue(r)}else this._fills=this._fills}get fills(){return this._fills}set master(t){}get master(){}set _numbers(t){this.#numbers=Array.isArray(t)?new Queue(t):this.#numbers}get _numbers(){return this.#numbers}set _tangents(t){this.#tangents=Number.isInteger(t)?this.#getTangents(t):this.#tangents}get get(){return this.#get}#insertInitialObject(t,e,i,s,r){t=this._getObjectPerCollectionType(t,s,r);this._moveObject(t,i,this.radius*e),this._setObjectPerCollectionType(t)}#insertEnsuingObjects(t,e,i){e=this._getObjectPerCollectionType(this.master.circles.endPoint,e,i);this._moveObject(e,t,this.radius),this._setObjectPerCollectionType(e)}#getTangents(){var e=new Array;let i=0;for(let t=1;t<=this.iterations;t++)e.push(6*i),i=t+i;return 1<this.iterations&&e.shift(),e}_getObjectPerCollectionType(t,e,i){let s=void 0;var r=this.#numbers.next;switch(this.master.constructor.name){case"Circles":s=this.get.circle(t,this.radius,e,i);break;case"Ellipses":s=this.get.ellipse(t,e,i);break;case"Rectangles":s=this.get.rectangle(t,e,i);break;case"RoundedRectangles":s=this.get.roundedRectangle(t,e,i);break;case"Texts":s=this.get.text(t,r,e,i);break;case"Group":var n=this.get.circle(t,this.radius,e,i),o=this.get.ellipse(t,e,i),a=this.get.rectangle(t,e,i),h=this.get.roundedRectangle(t,e,i),l=this.get.text(t,r,e,i);s=new Array(n,o,a,h,l)}return s}_moveObject(t,e,i){if(Array.isArray(t))for(var s of t)s.move(e,i);else t.move(e,i)}_setObjectPerCollectionType(t){var e=this.master.constructor.name;if("Group"===e)for(var i of t){var s=i.constructor.name.toLowerCase()+"s";this.master["roundedrectangles"==s?"roundedRectangles":s].push(i)}this.master.push(t)}get totalObjects(){return void 0===this.#tangents&&(this.#tangents=this.#getTangents()),this.#tangents[this.#tangents.length-1]}init(){this._numbers=Array.from({length:this.totalObjects},(t,e)=>e.toString());for(let r=0;r<this.iterations;r++){this.degrees.reset;let[e,i,s]=[this.degrees.next,this.strokes.next,this.fills.next];for(let t=0;t<1;t++)this.#insertInitialObject(this.point,r,e,i,s);[e,i,s]=[this.degrees.next,this.strokes.next,this.fills.next];for(let t=0;t<=r-1;t++)this.#insertEnsuingObjects(e,i,s);[e,i,s]=[this.degrees.next,this.strokes.next,this.fills.next];for(let t=0;t<=r-1;t++)this.#insertEnsuingObjects(e,i,s);[e,i,s]=[this.degrees.next,this.strokes.next,this.fills.next];for(let t=0;t<=r-1;t++)this.#insertEnsuingObjects(e,i,s);[e,i,s]=[this.degrees.next,this.strokes.next,this.fills.next];for(let t=0;t<=r-1;t++)this.#insertEnsuingObjects(e,i,s);[e,i,s]=[this.degrees.next,this.strokes.next,this.fills.next];for(let t=0;t<=r-1;t++)this.#insertEnsuingObjects(e,i,s);[e,i,s]=[this.degrees.next,this.strokes.next,this.fills.next];for(let t=0;t<=r-2;t++)this.#insertEnsuingObjects(e,i,s)}this.#config.reverse&&(this.master.circles.reverse(),this.master.ellipses.reverse(),this.master.rectangles.reverse(),this.master.roundedRectangles.reverse())}}